<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:salesforce="http://www.mulesoft.org/schema/mule/salesforce" xmlns:batch="http://www.mulesoft.org/schema/mule/batch"
	xmlns:ftp="http://www.mulesoft.org/schema/mule/ftp"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ftp http://www.mulesoft.org/schema/mule/ftp/current/mule-ftp.xsd
http://www.mulesoft.org/schema/mule/batch http://www.mulesoft.org/schema/mule/batch/current/mule-batch.xsd
http://www.mulesoft.org/schema/mule/salesforce http://www.mulesoft.org/schema/mule/salesforce/current/mule-salesforce.xsd">
	<ftp:config name="FTP_Config" doc:name="FTP Config" doc:id="3bc47386-fe0e-4d4a-a912-d3fde7a1da9e" >
		<ftp:connection host="ftp.devrel.mulesoft.com" username="devrel-mulesoft" password="mulesoft123" />
	</ftp:config>
	<salesforce:sfdc-config name="Salesforce_Config" doc:name="Salesforce Config" doc:id="7693aac1-cc7a-4a3a-b32d-2d6ad4095532" >
		<salesforce:basic-connection username="apudas90@gmail.com" password="Apudas@90" securityToken="wY61v95hcbwZUXQGx2uN8oceo" />
	</salesforce:sfdc-config>
	<flow name="cutomer-nightly-batchFlow" doc:id="7120bd44-6875-461e-b0e6-1d9d5487b4c8" >
		<ftp:listener doc:name="On New or Updated File" doc:id="9ebe7db9-e9d7-487c-8aa8-10037d8b343e" config-ref="FTP_Config" directory="/" watermarkEnabled="true">
			<scheduling-strategy >
				<fixed-frequency frequency="1" timeUnit="MINUTES" />
			</scheduling-strategy>
			<ftp:matcher filenamePattern="new_customers.csv" />
		</ftp:listener>
		<batch:job jobName="cutomer-nightly-batchBatch_Job" doc:id="164aac0a-cc75-4fa4-aed1-17771665923d" blockSize="40">
			<batch:process-records >
				<batch:step name="Batch_Step" doc:id="e491058d-53a3-4065-aff2-7e4432c7231f" >
					<batch:aggregator doc:name="Batch Aggregator" doc:id="00829720-307c-4bd1-acce-bc96f90052d9" size="10">
						<salesforce:upsert objectType="" externalIdFieldName="" doc:name="Upsert" doc:id="53ba8eee-33b5-4a70-8571-de159b91a71f" />
					</batch:aggregator>
				</batch:step>
			</batch:process-records>
		</batch:job>
	</flow>
</mule>
